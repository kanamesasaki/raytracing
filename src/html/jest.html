<!doctype html>
<html lang="en">
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CCZTCJYRD8"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-CCZTCJYRD8');
    </script>
    <meta charset="UTF-8">
    <title>Jest testing environment for ES6 modules without Babel - Ray Tracing in WebGL2</title>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    <link rel="stylesheet" href="../style.css">
  </head>
  <header>
    <a href="index.html">Ray Tracing in WebGL2</a> &#187;
    <a href="jest.html">Jest testing environment for ES6 modules without Babel</a>
    <span style="float: right"><ul class="select-lang">
        <li><a href="../en/index.html">English</a></li>
        <li><a href="../de/index.html">Deutsch</a></li>
        <li><a href="../ja/index.html">日本語</a></li>
    </ul></span>
  </header>

  <body>
    <h1>Jest testing environment for ES6 modules without Babel</h1>
    <h2>Create npm project</h2>
    <p>In the project directory (In case C:\projects\raytracing), execute the following command．</p>
<pre><code>C:\projects\raytracing>npm init</code></pre>
    <p>After answering the questions below, package.json file is automatically generated.</p>
<pre><code>package name: (raytracing)
version: (1.0.0)
description:
entry point: (index.js)
test command:
git repository:
keywords:
author: Kaname Sasaki
license: (ISC) MIT
About to write to C:\projects\raytracing\package.json:

{
  "name": "raytracing",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "directories": {
    "test": "test"
  },
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "Kaname Sasaki",
  "license": "MIT"
}

Is this OK? (yes)
</code></pre>

    <h2>Jest settings</h2>
    <p>Install Jest by the following command.</p>
<pre><code>C:\projects\raytracing>npm install --save-dev jest</code></pre>
    <p>In the package.json file, add settings for "scripts" and "type".</p>
<pre><code>{
  "name": "raytracing",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "directories": {
    "test": "test"
  },
  "scripts": {
    "test": "node --experimental-vm-modules node_modules/jest/bin/jest.js"
  },
  "type": "module",
  "author": "",
  "license": "MIT",
  "devDependencies": {
    "jest": "^26.6.3"
  }
}</code></pre>
<p>Create jest.config.js file and write the following scripts.</p>
<pre><code>export default {
  testEnvironment: 'jest-environment-node',
  transform: {}
};</code></pre>
<p>By the following command, Jest test can be executed.</p>
<pre><code>C:\projects\raytracing>npm test</code></pre>

<h2>Setting-up a local server</h2>
<p>
  By using Node.js, it is possible to setup the local server easily by the following command. 
</p>
<pre><code>C:\projects\raytracing>npx http-server</code></pre>

  </body>
  <footer>
    <a href="index.html">Ray Tracing in WebGL2</a> &#187;
    <a href="jest.html">Jest testing environment for ES6 modules without Babel</a>
    <span style="float: right">Copyright 2021, Kaname Sasaki</span>
  </footer>
</html>